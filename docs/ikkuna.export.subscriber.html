<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ikkuna.export.subscriber &#8212; ikkuna 0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ikkuna.utils" href="ikkuna.utils.html" />
    <link rel="prev" title="ikkuna.export" href="ikkuna.export.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/logo.png"></span>
          ikkuna</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="ikkuna.html">ikkuna</a></li>
<li class="toctree-l1"><a class="reference internal" href="main.html">main program</a></li>
<li class="toctree-l1"><a class="reference internal" href="train.html">train</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">ikkuna.export.subscriber</a><ul>
<li><a class="reference internal" href="#module-ikkuna.export.subscriber">Module contents</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="ikkuna.export.html" title="Previous Chapter: ikkuna.export"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ikkuna.export</span>
    </a>
  </li>
  <li>
    <a href="ikkuna.utils.html" title="Next Chapter: ikkuna.utils"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ikkuna.utils &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/ikkuna.export.subscriber.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#ikkuna-export-subscriber" id="id1">ikkuna.export.subscriber</a><ul>
<li><a class="reference internal" href="#module-ikkuna.export.subscriber" id="id2">Module contents</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="ikkuna-export-subscriber">
<h1><a class="toc-backref" href="#id1">ikkuna.export.subscriber</a><a class="headerlink" href="#ikkuna-export-subscriber" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-ikkuna.export.subscriber">
<span id="module-contents"></span><h2><a class="toc-backref" href="#id2">Module contents</a><a class="headerlink" href="#module-ikkuna.export.subscriber" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ikkuna.export.subscriber.Subscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">Subscriber</code><span class="sig-paren">(</span><em>subscriptions</em>, <em>message_bus</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for receiving and processing activations, gradients and other stuff into
insightful metrics.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.Subscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>subscriptions</em>, <em>message_bus</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>subscriptions</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>(</em><a class="reference internal" href="#ikkuna.export.subscriber.Subscription" title="ikkuna.export.subscriber.Subscription"><em>Subscription</em></a><em>)</em>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscriber._add_publication">
<code class="descname">_add_publication</code><span class="sig-paren">(</span><em>topic</em>, <em>type='DATA'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscriber._add_publication"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber._add_publication" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>topic</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Topic name</li>
<li><strong>type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <code class="docutils literal notranslate"><span class="pre">DATA</span></code> or <code class="docutils literal notranslate"><span class="pre">META</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscriber.__del__">
<code class="descname">__del__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscriber.__del__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.__del__" title="Permalink to this definition">¶</a></dt>
<dd><p>If for whatever reason a subscriber ceases to exist before the interpreter ends, delete
the registered topics</p>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscriber.kinds">
<code class="descname">kinds</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.kinds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscriber.subscriptions">
<code class="descname">subscriptions</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.subscriptions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscriber.message_bus">
<code class="descname">message_bus</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.message_bus" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message_or_bundle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>This is where the magic happens. Subclasses should override this method so that they can
compute their metric upon reception of their desired messages or do whatever else they want.
If interested in plotting, they should then use their
<a class="reference internal" href="#ikkuna.export.subscriber.PlotSubscriber.backend" title="ikkuna.export.subscriber.PlotSubscriber.backend"><code class="xref py py-attr docutils literal notranslate"><span class="pre">backend</span></code></a> property to plot the metric (if
they display line plots) and their <code class="docutils literal notranslate"><span class="pre">message_bus</span></code> to publish a new message with the metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message_or_bundle</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><em>ikkuna.export.messages.Message</em></a><em> or </em><a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><em>ikkuna.export.messages.MessageBundle</em></a>) – <p>If the subscriber uses a <a class="reference internal" href="#ikkuna.export.subscriber.SynchronizedSubscription" title="ikkuna.export.subscriber.SynchronizedSubscription"><code class="xref py py-class docutils literal notranslate"><span class="pre">SynchronizedSubscription</span></code></a>, a bundle is
received in each call, otherwise just a
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>.</p>
<p>Messages can either be <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.NetworkMessage" title="ikkuna.export.messages.NetworkMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">NetworkMessage</span></code></a>
if the Subscriber is not interested in actual training artifacts, or
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscriber.receive_message">
<code class="descname">receive_message</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscriber.receive_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.receive_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a single message received from an <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBus" title="ikkuna.export.messages.MessageBus"><code class="xref py py-class docutils literal notranslate"><span class="pre">MessageBus</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscriber.process_messages">
<code class="descname">process_messages</code><span class="sig-paren">(</span><em>message_or_bundle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscriber.process_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscriber.process_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback for processing a single <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> or a
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">MessageBundle</span></code></a> object with
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.NetworkMessage" title="ikkuna.export.messages.NetworkMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">NetworkMessage</span></code></a>s or
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>s in it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message_or_bundle</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><em>ikkuna.export.messages.Message</em></a><em> or </em><a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><em>ikkuna.export.messages.MessageBundle</em></a>) – The exact nature of this package is determined by the
<a class="reference internal" href="#ikkuna.export.subscriber.Subscription" title="ikkuna.export.subscriber.Subscription"><code class="xref py py-class docutils literal notranslate"><span class="pre">ikkuna.export.subscriber.Subscription</span></code></a> attached to this
<a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">ikkuna.export.subscriber.Subscriber</span></code></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If the received <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">MessageBundle</span></code></a> object is not
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle.complete" title="ikkuna.export.messages.MessageBundle.complete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">complete()</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.Subscription">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">Subscription</code><span class="sig-paren">(</span><em>subscriber</em>, <em>kinds</em>, <em>tag=None</em>, <em>subsample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification for a subscription that can span multiple kinds and a tag.</p>
<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscription._tag">
<code class="descname">_tag</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscription._tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Tag for filtering the processed messages</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscription._subscriber">
<code class="descname">_subscriber</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscription._subscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>The subscriber associated with the subscription</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber">ikkuna.export.subscriber.Subscriber</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscription.counter">
<code class="descname">counter</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscription.counter" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of times the Subscription was called for each module label or meta data
identifier. Since one <a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">ikkuna.export.subscriber.Subscriber</span></code></a> is associated
with only one configuration of <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ikkuna.export.messages.MessageBundle</span></code></a>, this
will enable proper subsampling of message streams.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>(<a class="reference internal" href="ikkuna.utils.html#ikkuna.utils.NamedModule" title="ikkuna.utils.NamedModule">ikkuna.utils.NamedModule</a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscription.kinds">
<code class="descname">kinds</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscription.kinds" title="Permalink to this definition">¶</a></dt>
<dd><p>List of string identifiers for different message kinds. These are all the
message kinds the subscriber wishes to receive</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.Subscription._subsample">
<code class="descname">_subsample</code><a class="headerlink" href="#ikkuna.export.subscriber.Subscription._subsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Factor for subsampling incoming messages. Only every <code class="docutils literal notranslate"><span class="pre">subsample</span></code>-th
message will be processed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscription.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>subscriber</em>, <em>kinds</em>, <em>tag=None</em>, <em>subsample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscription.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscription.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>subscriber</strong> (<a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber"><em>ikkuna.export.subscriber.Subscriber</em></a>) – Object that wants to receive the messages</li>
<li><strong>kinds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – List of message kinds to process</li>
<li><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – tag for filtering messages</li>
<li><strong>subsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of messages to ignore before processing one. Note that this number if
applied to every kind, regardless of frequency. So if <code class="docutils literal notranslate"><span class="pre">subsample</span> <span class="pre">=</span> <span class="pre">10</span></code>,
every tenth <code class="docutils literal notranslate"><span class="pre">weights</span></code> message would be processed, but also only every
tenth <code class="docutils literal notranslate"><span class="pre">epoch_finished</span></code> message.</li>
<li><strong>tag</strong> – Optional tag for filtering messages. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, all messages will be relayed</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">counter</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">kinds</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscription._handle_message">
<code class="descname">_handle_message</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscription._handle_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscription._handle_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a newly arrived message. Subclasses should override this method for any special
treatment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><em>ikkuna.export.messages.Message</em></a>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.Subscription.handle_message">
<code class="descname">handle_message</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#Subscription.handle_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.Subscription.handle_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback for receiving an incoming message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><em>ikkuna.export.messages.ModuleMessage</em></a>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.SynchronizedSubscription">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">SynchronizedSubscription</code><span class="sig-paren">(</span><em>subscriber</em>, <em>kinds</em>, <em>tag=None</em>, <em>subsample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#SynchronizedSubscription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SynchronizedSubscription" title="Permalink to this definition">¶</a></dt>
<dd><p>A subscription which buffers messages and publishes a set of messages, each of a different
kind, when one round (a train step) is over. This is useful for receiving several kinds of
messages in each train step and always have them be processed together.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.SynchronizedSubscription._new_round">
<code class="descname">_new_round</code><span class="sig-paren">(</span><em>round_idx</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#SynchronizedSubscription._new_round"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SynchronizedSubscription._new_round" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a new round of buffering, clearing the previous cache and resetting the record for
which kinds were received in this round.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>round_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Global train step of the new round</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a> – If not all desired kinds have been received for all identifiers yet in the current round</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.SynchronizedSubscription._handle_message">
<code class="descname">_handle_message</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#SynchronizedSubscription._handle_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SynchronizedSubscription._handle_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a new round if a new sequence number is seen.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.PlotSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">PlotSubscriber</code><span class="sig-paren">(</span><em>subscriptions</em>, <em>message_bus</em>, <em>plot_config</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#PlotSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.PlotSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for subscribers that output scalar or histogram values per time and module</p>
<dl class="attribute">
<dt id="ikkuna.export.subscriber.PlotSubscriber._backend">
<code class="descname">_backend</code><a class="headerlink" href="#ikkuna.export.subscriber.PlotSubscriber._backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Plotting backend</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="ikkuna.visualization.html#ikkuna.visualization.Backend" title="ikkuna.visualization.Backend">ikkuna.visualization.Backend</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.PlotSubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>subscriptions</em>, <em>message_bus</em>, <em>plot_config</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#PlotSubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.PlotSubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ylims</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>)</em>) – Optional Y-axis limits</li>
<li><strong>plot_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Configuration parameters for plotting. Relevant keys are <code class="docutils literal notranslate"><span class="pre">title</span></code>,
<code class="docutils literal notranslate"><span class="pre">xlabel</span></code>, <code class="docutils literal notranslate"><span class="pre">ylabel</span></code> and <code class="docutils literal notranslate"><span class="pre">ylims</span></code>. Which of them are actually used
depends on the <a class="reference internal" href="ikkuna.visualization.html#ikkuna.visualization.Backend" title="ikkuna.visualization.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.PlotSubscriber.backend">
<code class="descname">backend</code><a class="headerlink" href="#ikkuna.export.subscriber.PlotSubscriber.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The backend to use for plotting</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="ikkuna.visualization.html#ikkuna.visualization.Backend" title="ikkuna.visualization.Backend">ikkuna.visualization.Backend</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.PlotSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message_or_bundle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#PlotSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.PlotSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>This is where the magic happens. Subclasses should override this method so that they can
compute their metric upon reception of their desired messages or do whatever else they want.
If interested in plotting, they should then use their
<a class="reference internal" href="#ikkuna.export.subscriber.PlotSubscriber.backend" title="ikkuna.export.subscriber.PlotSubscriber.backend"><code class="xref py py-attr docutils literal notranslate"><span class="pre">backend</span></code></a> property to plot the metric (if
they display line plots) and their <code class="docutils literal notranslate"><span class="pre">message_bus</span></code> to publish a new message with the metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message_or_bundle</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><em>ikkuna.export.messages.Message</em></a><em> or </em><a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><em>ikkuna.export.messages.MessageBundle</em></a>) – <p>If the subscriber uses a <a class="reference internal" href="#ikkuna.export.subscriber.SynchronizedSubscription" title="ikkuna.export.subscriber.SynchronizedSubscription"><code class="xref py py-class docutils literal notranslate"><span class="pre">SynchronizedSubscription</span></code></a>, a bundle is
received in each call, otherwise just a
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>.</p>
<p>Messages can either be <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.NetworkMessage" title="ikkuna.export.messages.NetworkMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">NetworkMessage</span></code></a>
if the Subscriber is not interested in actual training artifacts, or
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.CallbackSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">CallbackSubscriber</code><span class="sig-paren">(</span><em>kinds</em>, <em>callback</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#CallbackSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.CallbackSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscriber class for subscribing to <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>s and
running a callback with them.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.CallbackSubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>kinds</em>, <em>callback</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#CallbackSubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.CallbackSubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>subscription</strong> (<a class="reference internal" href="#ikkuna.export.subscriber.Subscription" title="ikkuna.export.subscriber.Subscription"><em>Subscription</em></a>) – </li>
<li><strong>message_bus</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBus" title="ikkuna.export.messages.MessageBus"><em>ikkuna.export.messages.MessageBus</em></a>) – </li>
<li><strong>callback</strong> (<em>function</em>) – A function that accepts as many parameters as the <code class="docutils literal notranslate"><span class="pre">Subscription</span></code> delivers
messages at once.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.CallbackSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message_or_bundle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/subscriber.html#CallbackSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.CallbackSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>This is where the magic happens. Subclasses should override this method so that they can
compute their metric upon reception of their desired messages or do whatever else they want.
If interested in plotting, they should then use their
<a class="reference internal" href="#ikkuna.export.subscriber.PlotSubscriber.backend" title="ikkuna.export.subscriber.PlotSubscriber.backend"><code class="xref py py-attr docutils literal notranslate"><span class="pre">backend</span></code></a> property to plot the metric (if
they display line plots) and their <code class="docutils literal notranslate"><span class="pre">message_bus</span></code> to publish a new message with the metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message_or_bundle</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><em>ikkuna.export.messages.Message</em></a><em> or </em><a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><em>ikkuna.export.messages.MessageBundle</em></a>) – <p>If the subscriber uses a <a class="reference internal" href="#ikkuna.export.subscriber.SynchronizedSubscription" title="ikkuna.export.subscriber.SynchronizedSubscription"><code class="xref py py-class docutils literal notranslate"><span class="pre">SynchronizedSubscription</span></code></a>, a bundle is
received in each call, otherwise just a
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>.</p>
<p>Messages can either be <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.NetworkMessage" title="ikkuna.export.messages.NetworkMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">NetworkMessage</span></code></a>
if the Subscriber is not interested in actual training artifacts, or
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.ConditionNumberSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">ConditionNumberSubscriber</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/condition.html#ConditionNumberSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.ConditionNumberSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>A Subscriber which computes the condition number of a matrix. Not sure what this is useful
for, but maybe for Linear layers.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.ConditionNumberSubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/condition.html#ConditionNumberSubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.ConditionNumberSubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Message kind to compute condition number norm on. Not sure if it makes sense
for non-2d matrices, which have to be reshaped to 2-d
non-matrix type.</td>
</tr>
</tbody>
</table>
<p>For other parameters, see <a class="reference internal" href="#ikkuna.export.subscriber.PlotSubscriber" title="ikkuna.export.subscriber.PlotSubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotSubscriber</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.ConditionNumberSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/condition.html#ConditionNumberSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.ConditionNumberSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>
with the identifier <code class="docutils literal notranslate"><span class="pre">{kind}_condition_number</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.HessianEigenSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">HessianEigenSubscriber</code><span class="sig-paren">(</span><em>forward_fn</em>, <em>loss_fn</em>, <em>data_loader</em>, <em>batch_size</em>, <em>frequency=1</em>, <em>num_eig=1</em>, <em>power_steps=20</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/hessian_eig.html#HessianEigenSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.HessianEigenSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>A subscriber to compute the top-k eigenvalues of the hessian of the loss w.r.t. the weights.
This is done by using defalted power iteration from Noah Golmant’s <code class="docutils literal notranslate"><span class="pre">hessian_eigenthings</span></code>
module, which has to be installed. This operation is _very_ expensive, since it involves
differentiating twice over a subset of the training data. Since the weights must be fixed,
gradients from training cannot be reused.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In my experiments, the power iteration from <code class="docutils literal notranslate"><span class="pre">hessian_eigenthings</span></code> does not really work;
the estimates do not converge to a single value when increasing the number of steps, but
rather are all over the place. Investigation needed.</p>
</div>
<dl class="method">
<dt id="ikkuna.export.subscriber.HessianEigenSubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>forward_fn</em>, <em>loss_fn</em>, <em>data_loader</em>, <em>batch_size</em>, <em>frequency=1</em>, <em>num_eig=1</em>, <em>power_steps=20</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/hessian_eig.html#HessianEigenSubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.HessianEigenSubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>forward_fn</strong> (<em>function</em>) – Function to obtain predictions. You probably want to pass the model’s
<code class="docutils literal notranslate"><span class="pre">forward()</span></code> routine here</li>
<li><strong>loss_fn</strong> (<a class="reference external" href="https://pytorch.org/docs/master/nn.html#torch.nn.Module" title="(in PyTorch vmaster (1.0.0a0+1e05f4b ))"><em>torch.nn.Module</em></a>) – Loss function (such as <a class="reference external" href="https://pytorch.org/docs/master/nn.html#torch.nn.CrossEntropyLoss" title="(in PyTorch vmaster (1.0.0a0+1e05f4b ))"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.CrossEntropyLoss</span></code></a>)</li>
<li><strong>data_loader</strong> (<a class="reference external" href="https://pytorch.org/docs/master/data.html#torch.utils.data.DataLoader" title="(in PyTorch vmaster (1.0.0a0+1e05f4b ))"><em>torch.utils.data.DataLoader</em></a>) – Loader for the dataset to compute gradients over</li>
<li><strong>batch_finished</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of samples to compute gradients for in one step of power iteration
More should lead to a better estimate</li>
<li><strong>frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – How often to compute the eigenvalues (after every nth batch)</li>
<li><strong>num_eig</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of top eigenvalues to compute</li>
<li><strong>power_iter_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of steps in the power iteration for computing a singular value.
The total number of batches read is then <code class="docutils literal notranslate"><span class="pre">power_iter_steps</span> <span class="pre">*</span> <span class="pre">num_eig</span></code>
More steps should lead to a better estimate.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.HessianEigenSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/hessian_eig.html#HessianEigenSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.HessianEigenSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>This is where the magic happens. Subclasses should override this method so that they can
compute their metric upon reception of their desired messages or do whatever else they want.
If interested in plotting, they should then use their
<a class="reference internal" href="#ikkuna.export.subscriber.PlotSubscriber.backend" title="ikkuna.export.subscriber.PlotSubscriber.backend"><code class="xref py py-attr docutils literal notranslate"><span class="pre">backend</span></code></a> property to plot the metric (if
they display line plots) and their <code class="docutils literal notranslate"><span class="pre">message_bus</span></code> to publish a new message with the metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message_or_bundle</strong> (<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><em>ikkuna.export.messages.Message</em></a><em> or </em><a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.MessageBundle" title="ikkuna.export.messages.MessageBundle"><em>ikkuna.export.messages.MessageBundle</em></a>) – <p>If the subscriber uses a <a class="reference internal" href="#ikkuna.export.subscriber.SynchronizedSubscription" title="ikkuna.export.subscriber.SynchronizedSubscription"><code class="xref py py-class docutils literal notranslate"><span class="pre">SynchronizedSubscription</span></code></a>, a bundle is
received in each call, otherwise just a
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.Message" title="ikkuna.export.messages.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>.</p>
<p>Messages can either be <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.NetworkMessage" title="ikkuna.export.messages.NetworkMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">NetworkMessage</span></code></a>
if the Subscriber is not interested in actual training artifacts, or
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.HistogramSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">HistogramSubscriber</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/histogram.html#HistogramSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.HistogramSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a> which subsamples training artifacts and
computes histograms per epoch.  Histograms are non-normalized.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.HistogramSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/histogram.html#HistogramSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.HistogramSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the histogram is computed by the visualization backend (there’s no practical way
around it), this subscriber does <em>not</em> publish a
<a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.MeanSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">MeanSubscriber</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/mean.html#MeanSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.MeanSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ikkuna.export.subscriber.MeanSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/mean.html#MeanSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.MeanSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the average of a quantity. A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>
with the identifier <code class="docutils literal notranslate"><span class="pre">{kind}_mean</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.NormSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">NormSubscriber</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em>, <em>order=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/norm.html#NormSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.NormSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ikkuna.export.subscriber.NormSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/norm.html#NormSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.NormSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the norm of a quantity. A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>
with the identifier <code class="docutils literal notranslate"><span class="pre">{kind}_norm{order}</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.RatioSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">RatioSubscriber</code><span class="sig-paren">(</span><em>kinds</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em>, <em>absolute=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/ratio.html#RatioSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.RatioSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a> which computes the average ratio between two
quantities.  The dividend will be the first element of the
<a class="reference internal" href="#ikkuna.export.subscriber.Subscription.kinds" title="ikkuna.export.subscriber.Subscription.kinds"><code class="xref py py-attr docutils literal notranslate"><span class="pre">kinds</span></code></a> property, the divisor the second.
Therefore it is vital to pass the message kinds to the
<a class="reference internal" href="#ikkuna.export.subscriber.Subscription" title="ikkuna.export.subscriber.Subscription"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscription</span></code></a> object in the correct order.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.RatioSubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>kinds</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em>, <em>absolute=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/ratio.html#RatioSubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.RatioSubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>absolute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to use absolute ratio</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.RatioSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message_bundle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/ratio.html#RatioSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.RatioSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>The ratio between the two kinds is computed as the ratio of L2-Norms of the two Tensors.
A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a> with the identifier
<code class="docutils literal notranslate"><span class="pre">{kind1}_{kind2}_ratio</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.SpectralNormSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">SpectralNormSubscriber</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/spectral_norm.html#SpectralNormSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SpectralNormSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ikkuna.export.subscriber.SpectralNormSubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/spectral_norm.html#SpectralNormSubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SpectralNormSubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Message kind to compute spectral norm on. Doesn’t make sense with kinds of
non-matrix type.</td>
</tr>
</tbody>
</table>
<p>For other parameters, see <a class="reference internal" href="#ikkuna.export.subscriber.PlotSubscriber" title="ikkuna.export.subscriber.PlotSubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotSubscriber</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.SpectralNormSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/spectral_norm.html#SpectralNormSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SpectralNormSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>The spectral norm computation is taken from the <a class="reference external" href="https://pytorch.org/docs/master/_modules/torch/nn/utils/spectral_norm.html">Pytorch implementation of spectral norm</a>. It’s
possible to use SVD instead, but we are not interested in the full matrix decomposition,
merely in the singular values.</p>
<p>A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>
with the identifier <code class="docutils literal notranslate"><span class="pre">{kind}_spectral_norm</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.SumSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">SumSubscriber</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/sum.html#SumSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SumSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ikkuna.export.subscriber.SumSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/sum.html#SumSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.SumSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the sum of a quantity. A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>
with the identifier <code class="docutils literal notranslate"><span class="pre">{kind}_sum</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.TestAccuracySubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">TestAccuracySubscriber</code><span class="sig-paren">(</span><em>dataset_meta</em>, <em>forward_fn</em>, <em>batch_size</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>frequency=100</em>, <em>ylims=None</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/test_accuracy.html#TestAccuracySubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.TestAccuracySubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscriber which can compute the accuracy on a given data set (generally the test/validation
set).</p>
<dl class="attribute">
<dt id="ikkuna.export.subscriber.TestAccuracySubscriber._dataset_meta">
<code class="descname">_dataset_meta</code><a class="headerlink" href="#ikkuna.export.subscriber.TestAccuracySubscriber._dataset_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataset to compute accuracy over</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="train.html#train.DatasetMeta" title="train.DatasetMeta">train.DatasetMeta</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.TestAccuracySubscriber._data_loader">
<code class="descname">_data_loader</code><a class="headerlink" href="#ikkuna.export.subscriber.TestAccuracySubscriber._data_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Loader on the dataset</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://pytorch.org/docs/master/data.html#torch.utils.data.DataLoader" title="(in PyTorch vmaster (1.0.0a0+1e05f4b ))">torch.utils.data.DataLoader</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.TestAccuracySubscriber._frequency">
<code class="descname">_frequency</code><a class="headerlink" href="#ikkuna.export.subscriber.TestAccuracySubscriber._frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of batches to ignore before computing accuracy once</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ikkuna.export.subscriber.TestAccuracySubscriber._forward_fn">
<code class="descname">_forward_fn</code><a class="headerlink" href="#ikkuna.export.subscriber.TestAccuracySubscriber._forward_fn" title="Permalink to this definition">¶</a></dt>
<dd><p>Bound method on the model to push data through and get predictions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">function</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.TestAccuracySubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dataset_meta</em>, <em>forward_fn</em>, <em>batch_size</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>frequency=100</em>, <em>ylims=None</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/test_accuracy.html#TestAccuracySubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.TestAccuracySubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dataset_meta</strong> (<a class="reference internal" href="train.html#train.DatasetMeta" title="train.DatasetMeta"><em>train.DatasetMeta</em></a>) – Test dataset</li>
<li><strong>forward_fn</strong> (<em>function</em>) – Bound version of <a class="reference external" href="https://pytorch.org/docs/master/nn.html#torch.nn.Module.forward" title="(in PyTorch vmaster (1.0.0a0+1e05f4b ))"><code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.nn.Module.forward()</span></code></a>. This could be obtained
from the <a class="reference internal" href="train.html#train.Trainer.model" title="train.Trainer.model"><code class="xref py py-attr docutils literal notranslate"><span class="pre">train.Trainer.model</span></code></a> property.</li>
<li><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Batch size to use for pushing the test data through the model. This doesn’t
have to be the training batch size, but must be selected so that the forward
pass fits into memory.</li>
<li><strong>frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Inverse of the frequency with which to compute the accuracy</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.TestAccuracySubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/test_accuracy.html#TestAccuracySubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.TestAccuracySubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute accuracy over the entire test set.</p>
<p>A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.NetworkMessage" title="ikkuna.export.messages.NetworkMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">NetworkMessage</span></code></a> with the identifier
<code class="docutils literal notranslate"><span class="pre">test_accuracy</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.TrainAccuracySubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">TrainAccuracySubscriber</code><span class="sig-paren">(</span><em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/train_accuracy.html#TrainAccuracySubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.TrainAccuracySubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a> which computes the batch accuracy.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.TrainAccuracySubscriber.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/train_accuracy.html#TrainAccuracySubscriber.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.TrainAccuracySubscriber.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>For parameters see <a class="reference internal" href="#ikkuna.export.subscriber.PlotSubscriber" title="ikkuna.export.subscriber.PlotSubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotSubscriber</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="ikkuna.export.subscriber.TrainAccuracySubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/train_accuracy.html#TrainAccuracySubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.TrainAccuracySubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute accuracy over the current train batch.</p>
<p>A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.NetworkMessage" title="ikkuna.export.messages.NetworkMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">NetworkMessage</span></code></a> with the identifier
<code class="docutils literal notranslate"><span class="pre">train_accuracy</span></code> is published.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ikkuna.export.subscriber.VarianceSubscriber">
<em class="property">class </em><code class="descclassname">ikkuna.export.subscriber.</code><code class="descname">VarianceSubscriber</code><span class="sig-paren">(</span><em>kind</em>, <em>message_bus=&lt;ikkuna.export.messages.MessageBus object&gt;</em>, <em>tag=None</em>, <em>subsample=1</em>, <em>ylims=None</em>, <em>backend='tb'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/variance.html#VarianceSubscriber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.VarianceSubscriber" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#ikkuna.export.subscriber.Subscriber" title="ikkuna.export.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a> which computes the
variance of quantity for the current batch.</p>
<dl class="method">
<dt id="ikkuna.export.subscriber.VarianceSubscriber.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ikkuna/export/subscriber/variance.html#VarianceSubscriber.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ikkuna.export.subscriber.VarianceSubscriber.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the variance of a quantity. A <a class="reference internal" href="ikkuna.export.html#ikkuna.export.messages.ModuleMessage" title="ikkuna.export.messages.ModuleMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleMessage</span></code></a>
with the identifier <code class="docutils literal notranslate"><span class="pre">{kind}_variance</span></code> is published.</p>
</dd></dl>

</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Rasmus Diederichsen.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>